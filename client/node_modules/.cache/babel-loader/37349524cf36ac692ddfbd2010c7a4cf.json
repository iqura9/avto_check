{"ast":null,"code":"import * as uuid from \"uuid\";\nimport { adminApi } from \"../../Api/Api\";\nlet initialState = {\n  ArrayFolders: []\n};\nexport const folderReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"setFromDB\":\n      return { ...state,\n        ArrayFolders: action.folderData\n      };\n\n    case \"deleteId\":\n      //debugger;\n      return { ...state,\n        ArrayFolders: state.ArrayFolders.map(u => {\n          if (u._id === action.folderID) {\n            return { ...u,\n              Cars: u.Cars.filter(f => f.id != action.productID)\n            };\n          }\n\n          return { ...u,\n            ...u.Cars\n          };\n        })\n      };\n\n    case \"deleteFolderById\":\n      //debugger;\n      return { ...state,\n        ArrayFolders: state.ArrayFolders.filter(f => f._id != action.folderID)\n      };\n\n    case \"addNewFolder\":\n      return { ...state,\n        ArrayFolders: [...state.ArrayFolders, action.folderData]\n      };\n\n    case \"changeName\":\n      return { ...state,\n        ArrayFolders: state.ArrayFolders.map(u => {\n          if (u._id === action.folderId) {\n            return { ...u,\n              nameOfFolder: action.folderName\n            };\n          }\n\n          return { ...u\n          };\n        })\n      };\n\n    case \"iqura/folder/setCarToTheFolder\":\n      return { ...state,\n        ArrayFolders: state.ArrayFolders.map(u => {\n          if (u._id === action.folderId) {\n            return { ...u,\n              Cars: [...u.Cars, action.carFull]\n            };\n          }\n\n          return { ...u,\n            ...u.Cars\n          };\n        })\n      };\n\n    default:\n      {\n        return state;\n      }\n  }\n};\nexport const actions = {\n  deleteId: (folderID, productID) => ({\n    type: 'deleteId',\n    folderID,\n    productID\n  }),\n  deleteFolderById: folderID => ({\n    type: 'deleteFolderById',\n    folderID\n  }),\n  addNewFolder: folderData => ({\n    type: 'addNewFolder',\n    folderData\n  }),\n  setFromDB: folderData => ({\n    type: 'setFromDB',\n    folderData\n  }),\n  changeName: (folderId, folderName) => ({\n    type: 'changeName',\n    folderId,\n    folderName\n  }),\n  setCarToTheFolder: (folderId, carFull) => ({\n    type: 'iqura/folder/setCarToTheFolder',\n    folderId,\n    carFull\n  })\n};\nexport const deleteCarThunk = (folderId, productID) => async (dispatch, getState) => {\n  if (dispatch(actions.deleteId(folderId, productID))) {\n    const carToSend = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n    await adminApi.updateFolderName(folderId, carToSend);\n  }\n};\nexport const setCarToFolderThunk = (folderId, carId) => async (dispatch, getState) => {\n  let newId = uuid.v4();\n  let car = {\n    id: newId,\n    number: carId\n  };\n\n  if (dispatch(actions.setCarToTheFolder(folderId, car))) {\n    const carToSend = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n    await adminApi.updateFolderName(folderId, carToSend);\n  }\n};\nexport const setCarFromDB = id => async (dispatch, getState) => {\n  //const car = await adminApi.getGoods()\n  const car = await adminApi.getFolders(id).then(res => res.folders);\n  dispatch(actions.setFromDB(car));\n};\nexport const addNewFolder = data => async (dispatch, getState) => {\n  const car = await adminApi.addIdOfCar(data);\n  dispatch(actions.addNewFolder(car));\n};\nexport const chnageNameFolderThunk = (folderId, folderName) => async (dispatch, getState) => {\n  if (dispatch(actions.changeName(folderId, folderName))) {\n    const car = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n    await adminApi.updateFolderName(folderId, car);\n  }\n};\nexport const deleteFolderX = id => async (dispatch, getState) => {\n  try {\n    await adminApi.deleteFolder(id);\n    dispatch(actions.deleteFolderById(id));\n  } catch (e) {\n    console.log(e);\n  }\n};","map":{"version":3,"sources":["/Users/iqura/web_storm_projects/avto/client/src/Redux/reducers/folderPageReducer.ts"],"names":["uuid","adminApi","initialState","ArrayFolders","folderReducer","state","action","type","folderData","map","u","_id","folderID","Cars","filter","f","id","productID","folderId","nameOfFolder","folderName","carFull","actions","deleteId","deleteFolderById","addNewFolder","setFromDB","changeName","setCarToTheFolder","deleteCarThunk","dispatch","getState","carToSend","folderPage","find","updateFolderName","setCarToFolderThunk","carId","newId","v4","car","number","setCarFromDB","getFolders","then","res","folders","data","addIdOfCar","chnageNameFolderThunk","deleteFolderX","deleteFolder","e","console","log"],"mappings":"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","sourcesContent":["import {BaseThunkType, InferActionsTypes} from \"../Redux-store\";\nimport * as uuid from \"uuid\";\nimport {adminApi} from \"../../Api/Api\";\n\ninterface infoType {\n    id: string,\n    number: number\n}\n\nexport interface cars {\n    _id: string\n    mainImg: string,\n    nameOfFolder: string,\n    Cars: Array<infoType>\n}\n\nlet initialState = {\n    ArrayFolders: [] as Array<cars>\n}\ntype InitialState = typeof initialState;\nexport const folderReducer = (state = initialState, action: ActionsTypes): InitialState => {\n\n    switch (action.type) {\n        case \"setFromDB\":\n            return {\n                ...state,\n                ArrayFolders: action.folderData\n            }\n        case \"deleteId\":\n            //debugger;\n            return {\n                ...state,\n                ArrayFolders: state.ArrayFolders.map(u => {\n                    if (u._id === action.folderID) {\n                        return {...u, Cars: u.Cars.filter(f => f.id != action.productID)}\n                    }\n                    return {...u, ...u.Cars};\n                })\n            }\n        case \"deleteFolderById\":\n            //debugger;\n            return {\n                ...state,\n                ArrayFolders: state.ArrayFolders.filter(f => f._id != action.folderID),\n            }\n        case \"addNewFolder\":\n            return {\n                ...state,\n                ArrayFolders: [...state.ArrayFolders, action.folderData],\n            }\n        case \"changeName\":\n            return {\n                ...state,\n                ArrayFolders: state.ArrayFolders.map(u => {\n                    if (u._id === action.folderId) {\n                        return {...u, nameOfFolder: action.folderName};\n                    }\n                    return {...u};\n                })\n            }\n        case \"iqura/folder/setCarToTheFolder\":\n            return{\n                ...state,\n                ArrayFolders: state.ArrayFolders.map( u=>{\n                    if(u._id === action.folderId){\n                        return{...u, Cars: [...u.Cars,action.carFull]}\n                    }\n                    return{...u, ...u.Cars};\n                })\n            }\n        default: {\n            return state;\n        }\n    }\n}\n\nexport const actions = {\n    deleteId: (folderID: string, productID: string) => ({type: 'deleteId', folderID, productID} as const),\n    deleteFolderById: (folderID: string) => ({type: 'deleteFolderById', folderID} as const),\n    addNewFolder: (folderData: cars) => ({type: 'addNewFolder', folderData} as const),\n    setFromDB: (folderData: Array<cars>) => ({type: 'setFromDB', folderData} as const),\n    changeName: (folderId: string, folderName: string) => ({type: 'changeName', folderId, folderName} as const),\n    setCarToTheFolder: (folderId: string, carFull: infoType) => ({type: 'iqura/folder/setCarToTheFolder', folderId, carFull} as const),\n\n}\n\nexport const deleteCarThunk = (folderId:string,productID:string):ThunkType => async (dispatch,getState) =>{\n    if(dispatch(actions.deleteId(folderId,productID))){\n        const carToSend = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n        await adminApi.updateFolderName(folderId,carToSend);\n    }\n}\nexport const setCarToFolderThunk = (folderId: string,carId:number):ThunkType => async (dispatch,getState) =>{\n    let newId = uuid.v4();\n    let car = {id: newId, number: carId};\n    if(dispatch(actions.setCarToTheFolder(folderId, car))) {\n        const carToSend = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n        await adminApi.updateFolderName(folderId,carToSend);\n    }\n}\nexport const setCarFromDB = (id:string):ThunkType => async (dispatch,getState) =>{\n    //const car = await adminApi.getGoods()\n    const car = await  adminApi.getFolders(id).then(res => res.folders);\n    dispatch(actions.setFromDB(car));\n}\nexport const addNewFolder = (data:any):ThunkType => async (dispatch,getState) =>{\n\n    const car = await adminApi.addIdOfCar(data);\n    dispatch(actions.addNewFolder(car));\n}\nexport const chnageNameFolderThunk = (folderId:string,folderName:string):ThunkType => async (dispatch,getState) =>{\n    if(dispatch(actions.changeName(folderId,folderName))){\n        const car = await getState().folderPage.ArrayFolders.find(f => f._id == folderId);\n        await adminApi.updateFolderName(folderId,car);\n    }\n}\nexport const deleteFolderX = (id:string):ThunkType => async (dispatch,getState) =>{\n    try{\n        await adminApi.deleteFolder(id);\n        dispatch(actions.deleteFolderById(id));\n    }catch (e){\n        console.log(e);\n    }\n\n}\ntype ActionsTypes = InferActionsTypes<typeof actions>\ntype ThunkType = BaseThunkType<ActionsTypes>"]},"metadata":{},"sourceType":"module"}